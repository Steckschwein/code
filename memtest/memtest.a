*=$0200
!src "../bios/defs.h.a"
!src "../bios/bios.h.a"
adrl	= tmp0
adrh	= tmp1
pattern = tmp2
   
	lda   #$00
	sta   adrl
   sta   pattern
	lda   #$03
	sta   adrh
   ldy   #$00
   jsr   mem_ca
-	lda   pattern
   sta   (adrl),y
	lda   (adrl),y
	cmp   pattern
	bne   +
   inc   pattern
   bne   -
   lda   #$00
   sta   pattern
	iny
   bne   -
	inc   adrh
   jsr   mem_ca
	jmp   -
+	pha            ;save erroneous pattern
   jsr   mem_ca
   lda   #$20
   jsr   lcdprint   
   pla   
   jsr   lcdhex
-	jmp -	
mem_ca:
   phy
   jsr   lcdclear
	lda   #<msg
	sta   msgptr
	lda   #>msg
	sta   msgptr+1
   jsr   lcdstring
   lda   adrh
   jsr   lcdhex
   pla
   jsr   lcdhex
   rts
msg	!text "Mem ", $00