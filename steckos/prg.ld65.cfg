FEATURES {
      STARTADDRESS: default = $1000;  # default, must be defined before any segments below
}

SYMBOLS {
      __LOADADDR__: type=import;
      __STACKSIZE__: type = weak, value = $0800; # c runtime, 2k stack
}

MEMORY 
{
    ZP: start=$0, size=$100, type=rw, define=yes;
    ZPEXT: start=$0280, size=127, type=rw, define=no;
    LOADADDR: start=%S-2, size = $0002;
    RAM: start=%S, size=$df00-%S, type=rw, define=yes;  # $e000 is kernel start, see kernel.cfg
}

SEGMENTS 
{
    ZEROPAGE:   load = ZP, type=zp;
    STARTUP:  	load = RAM, type = ro,  define = yes, optional=yes;
    LOADADDR:   load = LOADADDR, type = ro;#, optional=yes;
    ONCE:     	load = RAM, type = ro, optional = yes; 
    CODE:       load = RAM, type = rw;
    RODATA:   	load = RAM, type = ro, define = yes, optional=yes;
    DATA:       load = RAM, type = rw, define = yes, align = $100;
    BSS:       	load = RAM, type = bss, define = yes, optional = yes;
}
FEATURES {
    CONDES: type    = constructor,
            label   = __CONSTRUCTOR_TABLE__,
            count   = __CONSTRUCTOR_COUNT__,
            segment = ONCE;
    CONDES: type    = destructor,
            label   = __DESTRUCTOR_TABLE__,
            count   = __DESTRUCTOR_COUNT__,
            segment = CODE;
}