FEATURES {
    STARTADDRESS: default = $1000;  # defined before segments
}
SYMBOLS {
    __LOADADDR__: type = import;
    __STACKSIZE__:	type = weak, value = $0800; # c runtime, 2k stack
}
MEMORY 
{
    ZP: start=$0, size=$100, type=rw, define=no;
    LOADADDR: start = %S - 2, size = $0002; 
    ZPEXT: start=$0280, size=127, type=rw, define=no;
    RAM: start=__LOADADDR__, size=$e000-__LOADADDR__, type=rw, define=yes;
}

SEGMENTS 
{
    STARTUP:  	load = RAM, type = ro,  define = yes;	
    LOADADDR:   load = LOADADDR, type = ro;
    CODE:       load = RAM, type = rw;
    ONCE:     	load = RAM, type = ro,  optional = yes; 
    DATA:       load = RAM, type = rw,  define = yes, align = $100;
    BSS:       	load = RAM, type = bss, define = yes, optional = no;
    ZEROPAGE:   load = ZP, type=zp;
}
FEATURES {
    CONDES: type    = constructor,
            label   = __CONSTRUCTOR_TABLE__,
            count   = __CONSTRUCTOR_COUNT__,
            segment = ONCE;
    CONDES: type    = destructor,
            label   = __DESTRUCTOR_TABLE__,
            count   = __DESTRUCTOR_COUNT__,
            segment = RODATA;
}