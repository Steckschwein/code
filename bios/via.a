;----------------------------------------------------------------------------------------------
; init VIA1 - set all ports to input
;----------------------------------------------------------------------------------------------
init_via1
			pha
			; VIA1
			lda #%00000000
			sta via1ddra
			sta via1ddrb

			lda #$00
			sta via1ier             ; enable VIA1 T1 interrupts

			; SR shift in, External clock on CB1
			lda #%00001100
			sta via1acr

			; Port b all outputs
			lda #$ff
			sta via1ddrb

			; SPICLK low, MOSI low, SPI_SS HI
			lda #%01111110
			sta via1portb


			; lda #<count
			; sta via1t1cl            ; set low byte of count
			; lda #>count
			; sta via1t1ch            ; set high byte of count
			
			; lda #%11000000
			; sta via1ier             ; enable VIA1 T1 interrupts

			; lda #%01000000
		 ; 	sta via1acr             ; T1 continuous, PB7 disabled
		 	
		 	pla
		 	rts
