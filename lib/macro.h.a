!ifdef macro_h_a !eof
macro_h_a = 1

!macro SetVector .word, .addr {
        lda #<.word
        sta .addr
        lda #>.word
        sta .addr+1
}

!macro PrintChar char {
        lda #char
        jsr chrout
}
!macro PrintString .word {
		+SetVector .word, msgptr
        jsr strout
}
!macro String .addr {
		phy
    	ldy #$00
-		lda .addr,y
		beq +
		jsr chrout
		iny
		bne -
+		ply
}
; !macro PrintStringAt .word,.x,.y {
; 	ldx #.x
; 	ldy #.y
; 	jsr lcdxy	

; 	+SetVector .word, msgptr
;     jsr lcdstring

; }

!macro save{
	pha
	phy
	phx
}
!macro restore{
	plx
	ply
	pla
}

!macro Copy .src, .trgt, .len {
	ldx #.len
-	lda .src,x
	sta .trgt,x
	dex
	bpl -
}

!macro toUpper {
	and	#$DF
}

!macro toLower {
	ora #$20
}


; !macro SDBlockAddr .src {
; 	ldx #$03
; 	ldy #$00

; -	lda .src,x
; 	sta sd_cmd_param,y	
; 	iny
; 	dex
; 	bpl -
; }
!macro debug .x {
	lda #.x
	jsr lcdprint
} 
!macro debug32 .x {
!for i,3,0 {
	lda .x+i
	jsr lcdhex
}
}

!macro ShellPrint {
	jsr chrout
}

!macro ShellPrintHex {
	jsr	hexout
}
!macro ShellPrintDec {
	; leading zero hack
	cmp #10
	bcs +
	pha
	+PrintChar '0'
	pla
+	
	jsr decout
}

!macro ShellPrintString .word {
	+SetVector .word,	msgptr
	jsr _textui_print
}

